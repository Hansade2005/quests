import{f as d,j as e,c as P,r as o,B as b,L as _,o as k,I as z,a7 as J,a8 as U,a9 as y,J as n,K as N,aa as A,ab as E,ac as H}from"./browser-ByRVlxZs.js";import{D as q,a as F,b as $,c as Q,d as B,e as W}from"./dialog-CXGJl-o7.js";import{D as K,a as G,b as X,c}from"./dropdown-menu-C1Ey9eto.js";import{L as Y}from"./label-BtiHOr9H.js";import{S as D,a as w,c as C}from"./sheet-DIs6ZxF9.js";import"./index-BLI4MUby.js";import"./index-Dc_FVRD7.js";import"./index-2emEW3K2.js";import"./index-DCjjJrI9.js";import"./x-CEbMeDD8.js";import"./index-DBjN4Su_.js";import"./index-CBgJt7o6.js";import"./chevron-right-Bveoklej.js";import"./circle-DigxURo9.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],M=d("bug",Z);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],se=d("chart-no-axes-column-increasing",ee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],re=d("database",ae);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],oe=d("eye-off",te);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],ie=d("route",ne);function le({className:i,...l}){return e.jsx("textarea",{className:P("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",i),"data-slot":"textarea",...l})}var ce=function(){return null};const de=function(){return null};function a(i){return i??void 0}const ue=z({actionId:H().nullish().transform(a),dataAttributes:E(n()).nullish().transform(a),distinctId:n().nullish().transform(a),featureFlags:A(n(),N()).nullish().transform(a),instrument:N().nullish().transform(a),source:y().nullish().transform(a),temporaryToken:n(),token:n(),toolbarVersion:y().nullish().transform(a),userEmail:n().nullish().transform(a),userIntent:y().nullish().transform(a)});function Ce(){const[i,l]=o.useState(!1),[S,m]=o.useState(!1),[T,u]=o.useState(!1),[V,R]=o.useState(!0),[v,x]=o.useState(""),[r,j]=o.useState({isValid:!1}),I=s=>{if(!s.trim())return{error:"Toolbar code is required",isValid:!1};try{let t=null,h;if(s.startsWith("http://")||s.startsWith("https://"))try{const p=new URL(s);if(p.hash)if(t=new URLSearchParams(p.hash.slice(1)).get("__posthog"),t)h=JSON.parse(t);else return{error:"URL missing __posthog parameter in hash",isValid:!1};else return{error:"URL missing hash parameters",isValid:!1}}catch{return{error:"Invalid URL format",isValid:!1}}else if(s.includes("window.posthog.loadToolbar")){const g=/window\.posthog\.loadToolbar\((\{.*\})\)/s.exec(s);if(g?.[1]){const L=g[1];try{h=JSON.parse(L)}catch{return{error:"Invalid JSON in JavaScript code",isValid:!1}}}else return{error:"Could not extract config from JavaScript code",isValid:!1}}else try{h=JSON.parse(s)}catch{return{error:"Invalid format: must be URL, JavaScript code, or JSON",isValid:!1}}const f=ue.safeParse(h);return f.success?{isValid:!0,parsedData:f.data}:{error:`Invalid toolbar parameters: ${J(f.error)}`,isValid:!1}}catch{return{error:"Failed to parse toolbar code",isValid:!1}}},O=()=>{if(!r.isValid||!r.parsedData){k.error("Please fix validation errors before loading toolbar");return}U.loadToolbar(r.parsedData),u(!1),x(""),j({isValid:!1})};return V?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-4 left-4 z-50",children:e.jsxs(K,{children:[e.jsx(G,{asChild:!0,children:e.jsx(b,{className:"rounded-full shadow-lg",size:"icon",title:"Debug Tools",variant:"warning",children:e.jsx(M,{className:"size-4"})})}),e.jsxs(X,{align:"start",side:"top",children:[e.jsx(c,{asChild:!0,children:e.jsxs(_,{className:"cursor-pointer",to:"/debug",children:[e.jsx(M,{className:"size-4"}),"Debug Page"]})}),e.jsxs(c,{className:"cursor-pointer",onClick:()=>{l(!0)},children:[e.jsx(ie,{className:"size-4"}),"Router DevTools"]}),e.jsxs(c,{className:"cursor-pointer",onClick:()=>{m(!0)},children:[e.jsx(re,{className:"size-4"}),"Query DevTools"]}),e.jsxs(c,{className:"cursor-pointer",onClick:()=>{u(!0)},children:[e.jsx(se,{className:"size-4"}),"Analytics Toolbar"]}),e.jsxs(c,{className:"cursor-pointer",onClick:()=>{R(!1),k.success("Debug menu hidden!")},children:[e.jsx(oe,{className:"size-4"}),"Hide Debug Menu"]})]})]})}),e.jsx(D,{onOpenChange:l,open:i,children:e.jsxs(w,{className:"h-1/2 p-0",side:"bottom",children:[e.jsx(C,{className:"sr-only",children:"React Router Devtools"}),e.jsx("div",{className:"h-full overflow-hidden text-xs",children:e.jsx(de,{className:"h-full",setIsOpen:l})})]})}),e.jsx(D,{onOpenChange:m,open:S,children:e.jsxs(w,{className:"h-1/2 p-0",side:"bottom",children:[e.jsx(C,{className:"sr-only",children:"React Query Devtools"}),e.jsx("div",{className:"h-full overflow-hidden text-xs",children:e.jsx(ce,{onClose:()=>{m(!1)}})})]})}),e.jsx(q,{onOpenChange:u,open:T,children:e.jsxs(F,{children:[e.jsxs($,{children:[e.jsx(Q,{children:"Load PostHog Analytics Toolbar"}),e.jsx(B,{children:"Enter the PostHog toolbar code, JavaScript snippet, or URL search params containing the __posthog parameter."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Y,{htmlFor:"toolbar-code",children:"Toolbar Code"}),e.jsx(le,{className:"min-h-24",id:"toolbar-code",onChange:s=>{const t=s.target.value;x(t),j(I(t))},placeholder:"Enter PostHog toolbar code, JavaScript snippet, or URL here...",value:v}),!r.isValid&&r.error&&v.trim()&&e.jsx("div",{className:"text-sm text-destructive",children:r.error})]})}),e.jsxs(W,{children:[e.jsx(b,{onClick:()=>{u(!1),x("")},variant:"outline",children:"Cancel"}),e.jsx(b,{disabled:!r.isValid,onClick:O,children:"Load Toolbar"})]})]})})]}):null}export{Ce as DebugMenu};

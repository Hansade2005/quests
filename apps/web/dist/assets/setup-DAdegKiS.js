import{r as o,j as t,d as J,a as K,b as X,c as U,B as I,v as Z,e as ee}from"./browser-ByRVlxZs.js";import{S as te}from"./supported-providers-DL_mBpue.js";import{Q as ne}from"./animated-logo-m8857RJK.js";import{C as se}from"./check-C4BuViip.js";import"./provider-metadata-CugWU6eq.js";function L(n){n=n.replace("#","");const s=Number.parseInt(n,16),r=s>>16&255,a=s>>8&255,m=s&255;return[r,a,m]}function re(n,s,r){return[Math.round(n[0]*(1-r)+s[0]*r),Math.round(n[1]*(1-r)+s[1]*r),Math.round(n[2]*(1-r)+s[2]*r)]}const ae=(n,s,r,a,m)=>{const p=(n-s)*(m-a)/(r-s)+a;return Math.max(p,0)};function oe(){const[n,s]=o.useState({x:0,y:0});return o.useEffect(()=>{const r=a=>{s({x:a.clientX,y:a.clientY})};return window.addEventListener("mousemove",r),()=>{window.removeEventListener("mousemove",r)}},[]),n}const ie=({className:n="",color:s="#ffffff",color2:r="#ffffff",disableMouseMovement:a=!1,ease:m=50,mobileBreakpoint:p=768,quantityDesktop:z=100,quantityMobile:E=50,refresh:Q=!1,size:k=.4,staticity:R=50,vx:B=0,vy:W=0})=>{const c=o.useRef(null),$=o.useRef(null),u=o.useRef(null),g=o.useRef([]),j=oe(),M=o.useRef({x:0,y:0}),i=o.useRef({h:0,w:0}),v=typeof window>"u"?1:window.devicePixelRatio,[P,A]=o.useState(z),S=()=>{const e=Math.floor(Math.random()*i.current.w),d=Math.floor(Math.random()*i.current.h),x=0,f=0,l=Math.floor(Math.random()*2)+k,w=0,y=Number.parseFloat((Math.random()*.6+.1).toFixed(1)),C=(Math.random()-.5)*.05,N=(Math.random()-.5)*.05,q=.1+Math.random()*4,D=L(s),H=L(r),V=Math.random(),_=re(D,H,V);return{alpha:w,color:_,dx:C,dy:N,magnetism:q,size:l,targetAlpha:y,translateX:x,translateY:f,x:e,y:d}},b=(e,d=!1)=>{if(u.current){const{alpha:x,color:f,size:l,translateX:w,translateY:y,x:C,y:N}=e;u.current.translate(w,y),u.current.beginPath(),u.current.arc(C,N,l,0,2*Math.PI),u.current.fillStyle=`rgba(${f.join(", ")}, ${x})`,u.current.fill(),u.current.setTransform(v,0,0,v,0,0),d||g.current.push(e)}},F=()=>{u.current&&u.current.clearRect(0,0,i.current.w,i.current.h)},Y=()=>{F(),g.current.forEach((e,d)=>{const f=[e.x+e.translateX-e.size,i.current.w-e.x-e.translateX-e.size,e.y+e.translateY-e.size,i.current.h-e.y-e.translateY-e.size].reduce((w,y)=>Math.min(w,y)),l=Number.parseFloat(ae(f,0,20,0,1).toFixed(2));if(l>1?(e.alpha+=.02,e.alpha>e.targetAlpha&&(e.alpha=e.targetAlpha)):e.alpha=e.targetAlpha*l,e.x+=e.dx+B,e.y+=e.dy+W,a||(e.translateX+=(M.current.x/(R/e.magnetism)-e.translateX)/m,e.translateY+=(M.current.y/(R/e.magnetism)-e.translateY)/m),b(e,!0),e.x<-e.size||e.x>i.current.w+e.size||e.y<-e.size||e.y>i.current.h+e.size){g.current.splice(d,1);const w=S();b(w)}}),window.requestAnimationFrame(Y)},G=()=>{c.current&&u.current&&(g.current.length=0,i.current.w=window.innerWidth,i.current.h=window.innerHeight,c.current.width=i.current.w*v,c.current.height=i.current.h*v,c.current.style.width="100vw",c.current.style.height="100vh",u.current.scale(v,v))},O=()=>{F(),g.current=[];for(let e=0;e<P;e++){const d=S();b(d)}},T=()=>{if(c.current&&!a){const e=c.current.getBoundingClientRect(),{h:d,w:x}=i.current,f=j.x-e.left-x/2,l=j.y-e.top-d/2;f<x/2&&f>-x/2&&l<d/2&&l>-d/2&&(M.current.x=f,M.current.y=l)}},h=o.useCallback(()=>{G(),O()},[P,s]);return o.useEffect(()=>{const e=()=>{window.innerWidth<p?A(E):A(z),h()};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[z,E,p,h]),o.useEffect(()=>(c.current&&(u.current=c.current.getContext("2d")),h(),Y(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}),[s,h]),o.useEffect(()=>{T()},[j.x,j.y,a]),o.useEffect(()=>{h()},[Q,h]),t.jsx("div",{"aria-hidden":"true",className:`${n} fixed inset-0`,ref:$,children:t.jsx("canvas",{ref:c,style:{height:"100vh",width:"100vw"}})})};function ue({onClose:n}){const s=J(),{data:r}=K(X.provider.live.list.experimental_liveOptions()),a=(r?.length??0)>0,m=()=>{Z.preferences.openSettingsWindow({showNewProviderDialog:!0,tab:"Providers"}),n?.()},p=()=>{s({to:"/new-tab"}),n?.()};return t.jsx("div",{className:U("flex flex-col gap-6 pb-12"),children:t.jsxs("div",{className:"flex flex-col items-center gap-6",children:[t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-md",children:a?t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-brand",children:t.jsx(se,{className:"h-6 w-6 text-brand-foreground"})}):t.jsx(ne,{size:64})}),t.jsx("h1",{className:"text-3xl font-bold",children:a?"Setup complete!":"Configure an AI provider"}),t.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-md",children:a?"You can now start creating with Quests.":"Add an AI provider to get started. API keys are encrypted and stored locally."})]}),a?t.jsx(I,{className:"w-full min-w-80",onClick:p,variant:"default",children:"Get started"}):t.jsxs("div",{className:"flex flex-col gap-6 w-full min-w-80",children:[t.jsx(I,{className:"w-full",onClick:m,variant:"default",children:"Add an AI provider"}),t.jsx(te,{})]})]})})}function he(){const{mutate:n}=ee(X.sidebar.close.mutationOptions());return o.useEffect(()=>{n({})},[n]),t.jsxs("div",{className:"flex min-h-svh flex-col bg-background",children:[t.jsx("div",{className:"fixed z-10 h-full w-full flex flex-1 justify-center items-center",children:t.jsx("div",{className:"max-w-sm",children:t.jsx(ue,{})})}),t.jsx(ie,{color:"#155ADE",color2:"#F7FF9B",disableMouseMovement:!0,ease:80,quantityDesktop:350,quantityMobile:100,refresh:!0})]})}export{he as component};

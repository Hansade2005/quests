import{f as C,e as x,b as m,u as R,r as h,j as e,L as _,a as O,c as z,B as T,l as B,i as L,v as F,g as G}from"./browser-ByRVlxZs.js";import{A as $,P as K,N as q}from"./app-status-icon-cBZhCycm.js";import{S as y,a as A,b as M,c as D,d as g,e as H,f as V,g as Q,h as U,i as W,j as J,k as X,l as Y}from"./sidebar-SAYjH9Jq.js";import{S as P,P as Z,L as ee}from"./app-icon-D6xJYLb3.js";import{D as se,a as te,b as ne,c as j,d as ae}from"./dropdown-menu-C1Ey9eto.js";import{I as ie}from"./input-b4JxTlpn.js";import{T as re}from"./icons-CW3DX_3H.js";import{E as oe}from"./external-link-CNRFkGVF.js";import{u as le}from"./react-MNBroJ8M.js";import{P as ce}from"./plus-Df7A54Wp.js";import{S as de}from"./settings-QCWEOfoD.js";import"./use-app-state-XN3_o-A1.js";import"./chevron-right-Bveoklej.js";import"./check-C4BuViip.js";import"./sheet-DIs6ZxF9.js";import"./index-BLI4MUby.js";import"./index-Dc_FVRD7.js";import"./index-2emEW3K2.js";import"./index-DCjjJrI9.js";import"./x-CEbMeDD8.js";import"./tooltip-CuHm1DfS.js";import"./index-DBjN4Su_.js";import"./index-CBgJt7o6.js";import"./logo-CYjnf5Jp.js";import"./sun-DU-usQ9G.js";import"./search-D46bnQJV.js";import"./circle-DigxURo9.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],me=C("arrow-up-right",ue);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],pe=C("ellipsis",he);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],be=C("star-off",xe);function S(o){const{mutate:l}=x(m.tabs.navigateCurrent.mutationOptions()),{mutate:t}=x(m.tabs.add.mutationOptions()),{onAuxClick:s,onClick:a,onMouseDown:d,params:r,search:n,target:u,to:c,...k}=o,b=R(),N=h.useCallback(i=>{i.button===1&&i.preventDefault(),d&&d(i)},[d]),v=h.useCallback(i=>{if(i.button===1){i.preventDefault();const f=b.buildLocation({params:r,search:n,to:c});t({urlPath:f.href})}s&&s(i)},[t,s,r,b,n,c]),w=h.useCallback(i=>{i.preventDefault();const f=b.buildLocation({params:r,search:n,to:c});i.button===0&&(i.ctrlKey||i.metaKey?t({urlPath:f.href}):l({urlPath:f.href})),a&&a(i)},[t,l,a,r,b,n,c]);return e.jsx(_,{...k,onAuxClick:v,onClick:w,onMouseDown:N,params:r,search:n,target:u,to:c})}function fe({items:o,...l}){return e.jsx(y,{...l,children:e.jsx(A,{children:e.jsx(M,{children:o.map(t=>e.jsxs(D,{className:"group",children:[e.jsx(g,{asChild:!0,className:"group-hover:bg-black/10 dark:group-hover:bg-white/10",isActive:t.isActive,children:e.jsxs(S,{className:"[&>svg]:size-5",to:t.url,children:[e.jsx(t.icon,{}),e.jsx("span",{children:t.title})]})}),t.badge&&e.jsx(H,{children:t.badge})]},t.title))})})})}function je({isFavorites:o,onOpenInNewTab:l,onRemoveFavorite:t,project:s}){const[a,d]=h.useState(!1),[r,n]=h.useState(!1),[u,c]=h.useState(s.title),{isPending:k,mutateAsync:b}=x(m.workspace.project.updateName.mutationOptions()),N=x(m.utils.openExternalLink.mutationOptions());h.useEffect(()=>{r||c(s.title)},[s.title,r]);const v=()=>{c(s.title),n(!0)},w=()=>{n(!1),c(s.title)},i=async()=>{if(u.trim()){if(u.trim()===s.title){n(!1);return}try{await b({newName:u.trim(),subdomain:s.subdomain}),n(!1)}catch{c(s.title)}}},f=p=>{p.key==="Enter"&&!p.nativeEvent.isComposing?(p.preventDefault(),i()):p.key==="Escape"&&(p.preventDefault(),w())},I=()=>{N.mutate({url:s.urls.localhost})};return e.jsxs(D,{className:"group",children:[r?e.jsxs("div",{className:"flex items-center gap-2 h-9 px-2",children:[s.icon&&e.jsx(P,{background:s.icon.background,icon:s.icon.lucide,size:"sm"}),e.jsx(ie,{autoFocus:!0,className:"h-7 text-sm",disabled:k,onBlur:()=>{i()},onChange:p=>{c(p.target.value)},onKeyDown:f,value:u})]}):e.jsx(g,{asChild:!0,className:"h-9 group-hover:bg-black/10 dark:group-hover:bg-white/10",children:e.jsxs(S,{params:{subdomain:s.subdomain},title:s.title,to:"/projects/$subdomain",children:[s.icon&&e.jsx(P,{background:s.icon.background,icon:s.icon.lucide,size:"sm"}),e.jsx("span",{onDoubleClick:v,children:s.title})]})}),!a&&!r&&e.jsx("div",{className:"absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md group-hover:hidden pointer-events-none",children:e.jsx($,{className:"h-4 w-4 shrink-0",subdomain:s.subdomain})}),!r&&e.jsxs(se,{onOpenChange:d,children:[e.jsx(te,{asChild:!0,children:e.jsxs(V,{showOnHover:!0,children:[e.jsx(pe,{className:"mt-1"}),e.jsx("span",{className:"sr-only",children:"More"})]})}),e.jsxs(ne,{align:"end",className:"w-56 rounded-lg",side:"bottom",children:[e.jsxs(j,{onClick:()=>{l(s.subdomain)},children:[e.jsx(me,{className:"text-muted-foreground"}),e.jsx("span",{children:"Open in new tab"})]}),e.jsxs(j,{onClick:I,children:[e.jsx(oe,{className:"text-muted-foreground"}),e.jsx("span",{children:"Open in external browser"})]}),e.jsx(ae,{}),e.jsxs(j,{onClick:v,children:[e.jsx(Z,{className:"text-muted-foreground"}),e.jsx("span",{children:"Rename"})]}),o&&t&&e.jsxs(j,{onClick:()=>{t(s.subdomain)},children:[e.jsx(be,{className:"text-muted-foreground"}),e.jsx("span",{children:"Remove favorite"})]}),e.jsx(S,{params:{subdomain:s.subdomain},search:{showDelete:!0},to:"/projects/$subdomain",children:e.jsxs(j,{className:"text-destructive focus:bg-destructive/15 focus:text-destructive",children:[e.jsx(re,{}),e.jsx("span",{children:"Delete"})]})})]})]})]},s.subdomain)}function E({isFavorites:o,projects:l,title:t}){const{mutate:s}=x(m.tabs.add.mutationOptions()),a=n=>{s({urlPath:`/projects/${n}`})},{mutate:d}=x(m.favorites.remove.mutationOptions()),r=n=>{d({subdomain:n})};return e.jsxs(y,{className:"group-data-[collapsible=icon]:hidden",children:[e.jsx(Q,{children:t}),e.jsx(M,{className:"gap-0",children:l.map(n=>e.jsx(je,{isFavorites:o,onOpenInNewTab:a,onRemoveFavorite:o?r:void 0,project:n},n.subdomain))})]})}function ve({asGroup:o=!0,items:l,...t}){const s=e.jsx(M,{children:l.map(a=>e.jsx(D,{className:"group",children:a.url?e.jsx(g,{asChild:!0,className:"group-hover:bg-black/10 dark:group-hover:bg-white/10",children:e.jsxs("a",{href:a.url,children:[e.jsx(a.icon,{}),e.jsx("span",{children:a.title})]})}):e.jsxs(g,{className:"group-hover:bg-black/10 dark:group-hover:bg-white/10",onClick:a.onClick,children:[e.jsx(a.icon,{}),e.jsx("span",{children:a.title})]})},a.title))});return o?e.jsx(y,{...t,children:e.jsx(A,{children:s})}):s}const ge={navMain:[{icon:ce,title:"New",url:"/new-tab"},{icon:ee,title:"Discover",url:"/discover"}]};function ke({...o}){const[l]=le(G),{data:t}=O(m.favorites.live.listProjects.experimental_liveOptions()),{data:s}=O(m.workspace.project.live.list.experimental_liveOptions()),{mutateAsync:a}=x(m.sidebar.close.mutationOptions()),d=h.useMemo(()=>{if(!s?.projects||!t?.length)return s?.projects??[];const n=new Set(t.map(u=>u.subdomain));return s.projects.filter(u=>!n.has(u.subdomain))},[s?.projects,t]);l.data;const r=[{icon:de,onClick:()=>{F.preferences.openSettingsWindow({tab:"General"})},title:"Settings"}];return e.jsxs(U,{collapsible:"none",side:"left",...o,children:[e.jsx(W,{children:e.jsxs("div",{className:z("flex items-center py-1 mt-px",L()?"ml-20":"ml-4 justify-end"),children:[e.jsx(T,{className:"size-6 text-muted-foreground pr-1",onClick:()=>{a({}).catch(n=>{B.error("Error closing sidebar",{error:n})})},size:"icon",variant:"ghost",children:e.jsx(K,{})}),e.jsx(q,{})]})}),e.jsxs(J,{children:[e.jsx(fe,{items:ge.navMain}),t&&t.length>0&&e.jsx(E,{isFavorites:!0,projects:t,title:"Favorites"}),d.length>0&&e.jsx(E,{isFavorites:!1,projects:d,title:"Projects"})]}),e.jsx(X,{children:e.jsx(ve,{asGroup:!1,items:r})})]})}function We(){return e.jsx("div",{className:"h-screen w-full overflow-hidden flex flex-col border-r border-border overflow-x-hidden select-none",style:{"--sidebar-width":"250px",width:"250px"},children:e.jsx(Y,{children:e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(ke,{className:"h-full",disableBackground:L()})})})})}export{We as component};

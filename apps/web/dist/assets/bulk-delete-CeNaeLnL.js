import{r as m,t as S,j as n,c as G,a as K,b as I,e as X,B as Q,o as g}from"./browser-ByRVlxZs.js";import{a as M,c as V,P as E,u as J}from"./index-2emEW3K2.js";import{u as Y}from"./index-DD5JTYsS.js";import{u as Z}from"./index-CBgJt7o6.js";import{C as ee}from"./check-C4BuViip.js";function T(e,t,{checkForDefaultPrevented:s=!0}={}){return function(c){if(e?.(c),s===!1||!c.defaultPrevented)return t?.(c)}}function te(e,t){return m.useReducer((s,a)=>t[s][a]??s,e)}var O=e=>{const{present:t,children:s}=e,a=ne(t),c=typeof s=="function"?s({present:a.isPresent}):m.Children.only(s),r=S(a.ref,re(c));return typeof s=="function"||a.isPresent?m.cloneElement(c,{ref:r}):null};O.displayName="Presence";function ne(e){const[t,s]=m.useState(),a=m.useRef(null),c=m.useRef(e),r=m.useRef("none"),f=e?"mounted":"unmounted",[h,d]=te(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const l=j(a.current);r.current=h==="mounted"?l:"none"},[h]),M(()=>{const l=a.current,o=c.current;if(o!==e){const u=r.current,p=j(l);e?d("MOUNT"):p==="none"||l?.display==="none"?d("UNMOUNT"):d(o&&u!==p?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,d]),M(()=>{if(t){let l;const o=t.ownerDocument.defaultView??window,i=p=>{const N=j(a.current).includes(CSS.escape(p.animationName));if(p.target===t&&N&&(d("ANIMATION_END"),!c.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",l=o.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},u=p=>{p.target===t&&(r.current=j(a.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{o.clearTimeout(l),t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:m.useCallback(l=>{a.current=l?getComputedStyle(l):null,s(l)},[])}}function j(e){return e?.animationName||"none"}function re(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var y="Checkbox",[se,fe]=V(y),[oe,R]=se(y);function ce(e){const{__scopeCheckbox:t,checked:s,children:a,defaultChecked:c,disabled:r,form:f,name:h,onCheckedChange:d,required:l,value:o="on",internal_do_not_use_render:i}=e,[u,p]=J({prop:s,defaultProp:c??!1,onChange:d,caller:y}),[x,N]=m.useState(null),[v,b]=m.useState(null),k=m.useRef(!1),w=x?!!f||!!x.closest("form"):!0,P={checked:u,disabled:r,setChecked:p,control:x,setControl:N,name:h,form:f,value:o,hasConsumerStoppedPropagationRef:k,required:l,defaultChecked:C(c)?!1:c,isFormControl:w,bubbleInput:v,setBubbleInput:b};return n.jsx(oe,{scope:t,...P,children:ae(i)?i(P):a})}var D="CheckboxTrigger",U=m.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...a},c)=>{const{control:r,value:f,disabled:h,checked:d,required:l,setControl:o,setChecked:i,hasConsumerStoppedPropagationRef:u,isFormControl:p,bubbleInput:x}=R(D,e),N=S(c,o),v=m.useRef(d);return m.useEffect(()=>{const b=r?.form;if(b){const k=()=>i(v.current);return b.addEventListener("reset",k),()=>b.removeEventListener("reset",k)}},[r,i]),n.jsx(E.button,{type:"button",role:"checkbox","aria-checked":C(d)?"mixed":d,"aria-required":l,"data-state":q(d),"data-disabled":h?"":void 0,disabled:h,value:f,...a,ref:N,onKeyDown:T(t,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:T(s,b=>{i(k=>C(k)?!0:!k),x&&p&&(u.current=b.isPropagationStopped(),u.current||b.stopPropagation())})})});U.displayName=D;var B=m.forwardRef((e,t)=>{const{__scopeCheckbox:s,name:a,checked:c,defaultChecked:r,required:f,disabled:h,value:d,onCheckedChange:l,form:o,...i}=e;return n.jsx(ce,{__scopeCheckbox:s,checked:c,defaultChecked:r,disabled:h,required:f,onCheckedChange:l,name:a,form:o,value:d,internal_do_not_use_render:({isFormControl:u})=>n.jsxs(n.Fragment,{children:[n.jsx(U,{...i,ref:t,__scopeCheckbox:s}),u&&n.jsx($,{__scopeCheckbox:s})]})})});B.displayName=y;var L="CheckboxIndicator",F=m.forwardRef((e,t)=>{const{__scopeCheckbox:s,forceMount:a,...c}=e,r=R(L,s);return n.jsx(O,{present:a||C(r.checked)||r.checked===!0,children:n.jsx(E.span,{"data-state":q(r.checked),"data-disabled":r.disabled?"":void 0,...c,ref:t,style:{pointerEvents:"none",...e.style}})})});F.displayName=L;var z="CheckboxBubbleInput",$=m.forwardRef(({__scopeCheckbox:e,...t},s)=>{const{control:a,hasConsumerStoppedPropagationRef:c,checked:r,defaultChecked:f,required:h,disabled:d,name:l,value:o,form:i,bubbleInput:u,setBubbleInput:p}=R(z,e),x=S(s,p),N=Y(r),v=Z(a);m.useEffect(()=>{const k=u;if(!k)return;const w=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(w,"checked").set,W=!c.current;if(N!==r&&A){const H=new Event("click",{bubbles:W});k.indeterminate=C(r),A.call(k,C(r)?!1:r),k.dispatchEvent(H)}},[u,N,r,c]);const b=m.useRef(C(r)?!1:r);return n.jsx(E.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??b.current,required:h,disabled:d,name:l,value:o,form:i,...t,tabIndex:-1,ref:x,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});$.displayName=z;function ae(e){return typeof e=="function"}function C(e){return e==="indeterminate"}function q(e){return C(e)?"indeterminate":e?"checked":"unchecked"}function _({className:e,...t}){return n.jsx(B,{className:G("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),"data-slot":"checkbox",...t,children:n.jsx(F,{className:"flex items-center justify-center text-current transition-none","data-slot":"checkbox-indicator",children:n.jsx(ee,{className:"size-3.5"})})})}function pe(){const[e,t]=m.useState(new Set),{data:s,isLoading:a,refetch:c}=K(I.workspace.project.list.queryOptions({})),r=X(I.workspace.project.trash.mutationOptions()),f=s?.projects??[],h=()=>{e.size===f.length?t(new Set):t(new Set(f.map(o=>o.subdomain)))},d=(o,i)=>{const u=new Set(e);i?u.add(o):u.delete(o),t(u)},l=async()=>{if(e.size===0){g.error("No projects selected");return}if(!window.confirm(`Are you sure you want to delete ${e.size} project(s)? This action cannot be undone.`))return;const i=[...e];let u=0,p=0;for(const x of i)try{await r.mutateAsync({subdomain:x}),u++,g.success(`Deleted project: ${x}`)}catch(N){p++,g.error(`Failed to delete project: ${x}`),console.error(`Failed to delete project ${x}:`,N)}t(new Set),await c(),g.success(`Bulk delete completed: ${u} successful, ${p} failed`)};return a?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading projects..."})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Bulk Delete Projects"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Select projects to delete permanently. This action cannot be undone."})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(_,{checked:e.size===f.length&&f.length>0,id:"select-all",onCheckedChange:h}),n.jsxs("label",{className:"text-sm font-medium",htmlFor:"select-all",children:["Select All (",f.length," projects)"]})]}),n.jsx(Q,{disabled:e.size===0||r.isPending,onClick:l,variant:"destructive",children:r.isPending?"Deleting...":`Delete Selected (${e.size})`})]}),n.jsx("div",{className:"border rounded-lg",children:f.length===0?n.jsx("div",{className:"p-6 text-center",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"No projects found"})}):n.jsx("div",{className:"divide-y",children:f.map(o=>n.jsxs("div",{className:"flex items-center space-x-3 p-4 hover:bg-muted/50",children:[n.jsx(_,{checked:e.has(o.subdomain),id:o.subdomain,onCheckedChange:i=>{d(o.subdomain,i===!0)}}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h3",{className:"text-sm font-medium truncate",children:o.title||"Untitled Project"}),n.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:o.subdomain})]}),o.description&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:o.description})]})]},o.subdomain))})})]})}export{pe as component};

import{f as be,r as a,Y as oe,j as n,c as M,t as Me,Z as et,B as ue,v as ke,a as tt,b as rt,k as nt,o as Ne}from"./browser-ByRVlxZs.js";import{A as ot}from"./ai-provider-guard-dialog-CqR3tf4a.js";import{C as at,B as fe}from"./badge-C-47JFJQ.js";import{R as st,P as lt,O as it,C as ct}from"./index-BLI4MUby.js";import{P as O,u as ut,c as dt}from"./index-2emEW3K2.js";import{u as L,P as Oe,a as pt,h as ft,R as mt,b as vt,F as ht,D as gt}from"./index-DCjjJrI9.js";import{S as xt}from"./search-D46bnQJV.js";import{c as ne}from"./index-Dc_FVRD7.js";import{c as De,R as bt,A as _e,C as wt,a as yt}from"./index-DBjN4Su_.js";import{a as Re,g as Ee,f as te}from"./provider-metadata-CugWU6eq.js";import{a as Ct,b as jt,c as Pt}from"./tooltip-CuHm1DfS.js";import{C as kt}from"./chevron-down-goFeZl_H.js";import{P as Nt}from"./plus-Df7A54Wp.js";import{C as Rt}from"./check-C4BuViip.js";import{h as Et}from"./has-ai-provider-CMHwJ9oN.js";import{C as At}from"./circle-DigxURo9.js";import{a as St}from"./react-MNBroJ8M.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Mt=be("arrow-up",It);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.35 2.69A10 10 0 0 1 21.3 15.65",key:"1pfsoa"}],["path",{d:"M19.08 19.08A10 10 0 1 1 4.92 4.92",key:"1ablyi"}]],Dt=be("circle-off",Ot);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Ft=be("square",_t);var Ae=1,$t=.9,Tt=.8,zt=.17,me=.1,ve=.999,Lt=.9999,Kt=.99,Vt=/[\\\/_+.#"@\[\(\{&]/,qt=/[\\\/_+.#"@\[\(\{&]/g,Ht=/[\s-]/,Fe=/[\s-]/g;function ge(e,r,t,i,l,s,c){if(s===r.length)return l===e.length?Ae:Kt;var u=`${l},${s}`;if(c[u]!==void 0)return c[u];for(var h=i.charAt(s),d=t.indexOf(h,l),v=0,f,w,b,E;d>=0;)f=ge(e,r,t,i,d+1,s+1,c),f>v&&(d===l?f*=Ae:Vt.test(e.charAt(d-1))?(f*=Tt,b=e.slice(l,d-1).match(qt),b&&l>0&&(f*=Math.pow(ve,b.length))):Ht.test(e.charAt(d-1))?(f*=$t,E=e.slice(l,d-1).match(Fe),E&&l>0&&(f*=Math.pow(ve,E.length))):(f*=zt,l>0&&(f*=Math.pow(ve,d-l))),e.charAt(d)!==r.charAt(s)&&(f*=Lt)),(f<me&&t.charAt(d-1)===i.charAt(s+1)||i.charAt(s+1)===i.charAt(s)&&t.charAt(d-1)!==i.charAt(s))&&(w=ge(e,r,t,i,d+1,s+2,c),w*me>f&&(f=w*me)),f>v&&(v=f),d=t.indexOf(h,d+1);return c[u]=v,v}function Se(e){return e.toLowerCase().replace(Fe," ")}function Bt(e,r,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,ge(e,r,Se(e),Se(r),0,0,{})}var re='[cmdk-group=""]',he='[cmdk-group-items=""]',Gt='[cmdk-group-heading=""]',$e='[cmdk-item=""]',Ie=`${$e}:not([aria-disabled="true"])`,xe="cmdk-item-select",H="data-value",Wt=(e,r,t)=>Bt(e,r,t),Te=a.createContext(void 0),ae=()=>a.useContext(Te),ze=a.createContext(void 0),we=()=>a.useContext(ze),Le=a.createContext(void 0),Ke=a.forwardRef((e,r)=>{let t=B(()=>{var o,m;return{search:"",value:(m=(o=e.value)!=null?o:e.defaultValue)!=null?m:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),i=B(()=>new Set),l=B(()=>new Map),s=B(()=>new Map),c=B(()=>new Set),u=Ve(e),{label:h,children:d,value:v,onValueChange:f,filter:w,shouldFilter:b,loop:E,disablePointerSelection:T=!1,vimBindings:A=!0,...C}=e,k=L(),P=L(),Y=L(),D=a.useRef(null),j=or();K(()=>{if(v!==void 0){let o=v.trim();t.current.value=o,N.emit()}},[v]),K(()=>{j(6,X)},[]);let N=a.useMemo(()=>({subscribe:o=>(c.current.add(o),()=>c.current.delete(o)),snapshot:()=>t.current,setState:(o,m,g)=>{var p,x,y,I;if(!Object.is(t.current[o],m)){if(t.current[o]=m,o==="search")Q(),q(),j(1,J);else if(o==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let R=document.getElementById(Y);R?R.focus():(p=document.getElementById(k))==null||p.focus()}if(j(7,()=>{var R;t.current.selectedItemId=(R=_())==null?void 0:R.id,N.emit()}),g||j(5,X),((x=u.current)==null?void 0:x.value)!==void 0){let R=m??"";(I=(y=u.current).onValueChange)==null||I.call(y,R);return}}N.emit()}},emit:()=>{c.current.forEach(o=>o())}}),[]),V=a.useMemo(()=>({value:(o,m,g)=>{var p;m!==((p=s.current.get(o))==null?void 0:p.value)&&(s.current.set(o,{value:m,keywords:g}),t.current.filtered.items.set(o,Z(m,g)),j(2,()=>{q(),N.emit()}))},item:(o,m)=>(i.current.add(o),m&&(l.current.has(m)?l.current.get(m).add(o):l.current.set(m,new Set([o]))),j(3,()=>{Q(),q(),t.current.value||J(),N.emit()}),()=>{s.current.delete(o),i.current.delete(o),t.current.filtered.items.delete(o);let g=_();j(4,()=>{Q(),g?.getAttribute("id")===o&&J(),N.emit()})}),group:o=>(l.current.has(o)||l.current.set(o,new Set),()=>{s.current.delete(o),l.current.delete(o)}),filter:()=>u.current.shouldFilter,label:h||e["aria-label"],getDisablePointerSelection:()=>u.current.disablePointerSelection,listId:k,inputId:Y,labelId:P,listInnerRef:D}),[]);function Z(o,m){var g,p;let x=(p=(g=u.current)==null?void 0:g.filter)!=null?p:Wt;return o?x(o,t.current.search,m):0}function q(){if(!t.current.search||u.current.shouldFilter===!1)return;let o=t.current.filtered.items,m=[];t.current.filtered.groups.forEach(p=>{let x=l.current.get(p),y=0;x.forEach(I=>{let R=o.get(I);y=Math.max(R,y)}),m.push([p,y])});let g=D.current;z().sort((p,x)=>{var y,I;let R=p.getAttribute("id"),le=x.getAttribute("id");return((y=o.get(le))!=null?y:0)-((I=o.get(R))!=null?I:0)}).forEach(p=>{let x=p.closest(he);x?x.appendChild(p.parentElement===x?p:p.closest(`${he} > *`)):g.appendChild(p.parentElement===g?p:p.closest(`${he} > *`))}),m.sort((p,x)=>x[1]-p[1]).forEach(p=>{var x;let y=(x=D.current)==null?void 0:x.querySelector(`${re}[${H}="${encodeURIComponent(p[0])}"]`);y?.parentElement.appendChild(y)})}function J(){let o=z().find(g=>g.getAttribute("aria-disabled")!=="true"),m=o?.getAttribute(H);N.setState("value",m||void 0)}function Q(){var o,m,g,p;if(!t.current.search||u.current.shouldFilter===!1){t.current.filtered.count=i.current.size;return}t.current.filtered.groups=new Set;let x=0;for(let y of i.current){let I=(m=(o=s.current.get(y))==null?void 0:o.value)!=null?m:"",R=(p=(g=s.current.get(y))==null?void 0:g.keywords)!=null?p:[],le=Z(I,R);t.current.filtered.items.set(y,le),le>0&&x++}for(let[y,I]of l.current)for(let R of I)if(t.current.filtered.items.get(R)>0){t.current.filtered.groups.add(y);break}t.current.filtered.count=x}function X(){var o,m,g;let p=_();p&&(((o=p.parentElement)==null?void 0:o.firstChild)===p&&((g=(m=p.closest(re))==null?void 0:m.querySelector(Gt))==null||g.scrollIntoView({block:"nearest"})),p.scrollIntoView({block:"nearest"}))}function _(){var o;return(o=D.current)==null?void 0:o.querySelector(`${$e}[aria-selected="true"]`)}function z(){var o;return Array.from(((o=D.current)==null?void 0:o.querySelectorAll(Ie))||[])}function U(o){let m=z()[o];m&&N.setState("value",m.getAttribute(H))}function ee(o){var m;let g=_(),p=z(),x=p.findIndex(I=>I===g),y=p[x+o];(m=u.current)!=null&&m.loop&&(y=x+o<0?p[p.length-1]:x+o===p.length?p[0]:p[x+o]),y&&N.setState("value",y.getAttribute(H))}function S(o){let m=_(),g=m?.closest(re),p;for(;g&&!p;)g=o>0?rr(g,re):nr(g,re),p=g?.querySelector(Ie);p?N.setState("value",p.getAttribute(H)):ee(o)}let Ce=()=>U(z().length-1),je=o=>{o.preventDefault(),o.metaKey?Ce():o.altKey?S(1):ee(1)},Pe=o=>{o.preventDefault(),o.metaKey?U(0):o.altKey?S(-1):ee(-1)};return a.createElement(O.div,{ref:r,tabIndex:-1,...C,"cmdk-root":"",onKeyDown:o=>{var m;(m=C.onKeyDown)==null||m.call(C,o);let g=o.nativeEvent.isComposing||o.keyCode===229;if(!(o.defaultPrevented||g))switch(o.key){case"n":case"j":{A&&o.ctrlKey&&je(o);break}case"ArrowDown":{je(o);break}case"p":case"k":{A&&o.ctrlKey&&Pe(o);break}case"ArrowUp":{Pe(o);break}case"Home":{o.preventDefault(),U(0);break}case"End":{o.preventDefault(),Ce();break}case"Enter":{o.preventDefault();let p=_();if(p){let x=new Event(xe);p.dispatchEvent(x)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:V.inputId,id:V.labelId,style:sr},h),de(e,o=>a.createElement(ze.Provider,{value:N},a.createElement(Te.Provider,{value:V},o))))}),Yt=a.forwardRef((e,r)=>{var t,i;let l=L(),s=a.useRef(null),c=a.useContext(Le),u=ae(),h=Ve(e),d=(i=(t=h.current)==null?void 0:t.forceMount)!=null?i:c?.forceMount;K(()=>{if(!d)return u.item(l,c?.id)},[d]);let v=qe(l,s,[e.value,e.children,s],e.keywords),f=we(),w=F(j=>j.value&&j.value===v.current),b=F(j=>d||u.filter()===!1?!0:j.search?j.filtered.items.get(l)>0:!0);a.useEffect(()=>{let j=s.current;if(!(!j||e.disabled))return j.addEventListener(xe,E),()=>j.removeEventListener(xe,E)},[b,e.onSelect,e.disabled]);function E(){var j,N;T(),(N=(j=h.current).onSelect)==null||N.call(j,v.current)}function T(){f.setState("value",v.current,!0)}if(!b)return null;let{disabled:A,value:C,onSelect:k,forceMount:P,keywords:Y,...D}=e;return a.createElement(O.div,{ref:oe(s,r),...D,id:l,"cmdk-item":"",role:"option","aria-disabled":!!A,"aria-selected":!!w,"data-disabled":!!A,"data-selected":!!w,onPointerMove:A||u.getDisablePointerSelection()?void 0:T,onClick:A?void 0:E},e.children)}),Zt=a.forwardRef((e,r)=>{let{heading:t,children:i,forceMount:l,...s}=e,c=L(),u=a.useRef(null),h=a.useRef(null),d=L(),v=ae(),f=F(b=>l||v.filter()===!1?!0:b.search?b.filtered.groups.has(c):!0);K(()=>v.group(c),[]),qe(c,u,[e.value,e.heading,h]);let w=a.useMemo(()=>({id:c,forceMount:l}),[l]);return a.createElement(O.div,{ref:oe(u,r),...s,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},t&&a.createElement("div",{ref:h,"cmdk-group-heading":"","aria-hidden":!0,id:d},t),de(e,b=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?d:void 0},a.createElement(Le.Provider,{value:w},b))))}),Jt=a.forwardRef((e,r)=>{let{alwaysRender:t,...i}=e,l=a.useRef(null),s=F(c=>!c.search);return!t&&!s?null:a.createElement(O.div,{ref:oe(l,r),...i,"cmdk-separator":"",role:"separator"})}),Qt=a.forwardRef((e,r)=>{let{onValueChange:t,...i}=e,l=e.value!=null,s=we(),c=F(d=>d.search),u=F(d=>d.selectedItemId),h=ae();return a.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),a.createElement(O.input,{ref:r,...i,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":h.listId,"aria-labelledby":h.labelId,"aria-activedescendant":u,id:h.inputId,type:"text",value:l?e.value:c,onChange:d=>{l||s.setState("search",d.target.value),t?.(d.target.value)}})}),Xt=a.forwardRef((e,r)=>{let{children:t,label:i="Suggestions",...l}=e,s=a.useRef(null),c=a.useRef(null),u=F(d=>d.selectedItemId),h=ae();return a.useEffect(()=>{if(c.current&&s.current){let d=c.current,v=s.current,f,w=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let b=d.offsetHeight;v.style.setProperty("--cmdk-list-height",b.toFixed(1)+"px")})});return w.observe(d),()=>{cancelAnimationFrame(f),w.unobserve(d)}}},[]),a.createElement(O.div,{ref:oe(s,r),...l,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":i,id:h.listId},de(e,d=>a.createElement("div",{ref:oe(c,h.listInnerRef),"cmdk-list-sizer":""},d)))}),Ut=a.forwardRef((e,r)=>{let{open:t,onOpenChange:i,overlayClassName:l,contentClassName:s,container:c,...u}=e;return a.createElement(st,{open:t,onOpenChange:i},a.createElement(lt,{container:c},a.createElement(it,{"cmdk-overlay":"",className:l}),a.createElement(ct,{"aria-label":e.label,"cmdk-dialog":"",className:s},a.createElement(Ke,{ref:r,...u}))))}),er=a.forwardRef((e,r)=>F(t=>t.filtered.count===0)?a.createElement(O.div,{ref:r,...e,"cmdk-empty":"",role:"presentation"}):null),tr=a.forwardRef((e,r)=>{let{progress:t,children:i,label:l="Loading...",...s}=e;return a.createElement(O.div,{ref:r,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},de(e,c=>a.createElement("div",{"aria-hidden":!0},c)))}),W=Object.assign(Ke,{List:Xt,Item:Yt,Input:Qt,Group:Zt,Separator:Jt,Dialog:Ut,Empty:er,Loading:tr});function rr(e,r){let t=e.nextElementSibling;for(;t;){if(t.matches(r))return t;t=t.nextElementSibling}}function nr(e,r){let t=e.previousElementSibling;for(;t;){if(t.matches(r))return t;t=t.previousElementSibling}}function Ve(e){let r=a.useRef(e);return K(()=>{r.current=e}),r}var K=typeof window>"u"?a.useEffect:a.useLayoutEffect;function B(e){let r=a.useRef();return r.current===void 0&&(r.current=e()),r}function F(e){let r=we(),t=()=>e(r.snapshot());return a.useSyncExternalStore(r.subscribe,t,t)}function qe(e,r,t,i=[]){let l=a.useRef(),s=ae();return K(()=>{var c;let u=(()=>{var d;for(let v of t){if(typeof v=="string")return v.trim();if(typeof v=="object"&&"current"in v)return v.current?(d=v.current.textContent)==null?void 0:d.trim():l.current}})(),h=i.map(d=>d.trim());s.value(e,u,h),(c=r.current)==null||c.setAttribute(H,u),l.current=u}),l}var or=()=>{let[e,r]=a.useState(),t=B(()=>new Map);return K(()=>{t.current.forEach(i=>i()),t.current=new Map},[e]),(i,l)=>{t.current.set(i,l),r({})}};function ar(e){let r=e.type;return typeof r=="function"?r(e.props):"render"in r?r.render(e.props):e}function de({asChild:e,children:r},t){return e&&a.isValidElement(r)?a.cloneElement(ar(r),{ref:r.ref},t(r.props.children)):t(r)}var sr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function lr({className:e,...r}){return n.jsx(W,{className:M("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),"data-slot":"command",...r})}function ir({...e}){return n.jsx(W.Empty,{className:"py-6 text-center text-sm","data-slot":"command-empty",...e})}function ie({className:e,...r}){return n.jsx(W.Group,{className:M("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),"data-slot":"command-group",...r})}function cr({className:e,containerClassName:r,...t}){return n.jsxs("div",{className:M("flex h-9 items-center gap-2 border-b px-3",r),"data-slot":"command-input-wrapper",children:[n.jsx(xt,{className:"size-4 shrink-0 opacity-50"}),n.jsx(W.Input,{className:M("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),"data-slot":"command-input",...t})]})}function ce({className:e,...r}){return n.jsx(W.Item,{className:M("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),"data-slot":"command-item",...r})}function ur({className:e,...r}){return n.jsx(W.List,{className:M("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),"data-slot":"command-list",...r})}var pe="Popover",[He,Jr]=dt(pe,[De]),se=De(),[dr,$]=He(pe),Be=e=>{const{__scopePopover:r,children:t,open:i,defaultOpen:l,onOpenChange:s,modal:c=!1}=e,u=se(r),h=a.useRef(null),[d,v]=a.useState(!1),[f,w]=ut({prop:i,defaultProp:l??!1,onChange:s,caller:pe});return n.jsx(bt,{...u,children:n.jsx(dr,{scope:r,contentId:L(),triggerRef:h,open:f,onOpenChange:w,onOpenToggle:a.useCallback(()=>w(b=>!b),[w]),hasCustomAnchor:d,onCustomAnchorAdd:a.useCallback(()=>v(!0),[]),onCustomAnchorRemove:a.useCallback(()=>v(!1),[]),modal:c,children:t})})};Be.displayName=pe;var Ge="PopoverAnchor",pr=a.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,l=$(Ge,t),s=se(t),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=l;return a.useEffect(()=>(c(),()=>u()),[c,u]),n.jsx(_e,{...s,...i,ref:r})});pr.displayName=Ge;var We="PopoverTrigger",Ye=a.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,l=$(We,t),s=se(t),c=Me(r,l.triggerRef),u=n.jsx(O.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Ue(l.open),...i,ref:c,onClick:ne(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?u:n.jsx(_e,{asChild:!0,...s,children:u})});Ye.displayName=We;var ye="PopoverPortal",[fr,mr]=He(ye,{forceMount:void 0}),Ze=e=>{const{__scopePopover:r,forceMount:t,children:i,container:l}=e,s=$(ye,r);return n.jsx(fr,{scope:r,forceMount:t,children:n.jsx(Oe,{present:t||s.open,children:n.jsx(pt,{asChild:!0,container:l,children:i})})})};Ze.displayName=ye;var G="PopoverContent",Je=a.forwardRef((e,r)=>{const t=mr(G,e.__scopePopover),{forceMount:i=t.forceMount,...l}=e,s=$(G,e.__scopePopover);return n.jsx(Oe,{present:i||s.open,children:s.modal?n.jsx(hr,{...l,ref:r}):n.jsx(gr,{...l,ref:r})})});Je.displayName=G;var vr=et("PopoverContent.RemoveScroll"),hr=a.forwardRef((e,r)=>{const t=$(G,e.__scopePopover),i=a.useRef(null),l=Me(r,i),s=a.useRef(!1);return a.useEffect(()=>{const c=i.current;if(c)return ft(c)},[]),n.jsx(mt,{as:vr,allowPinchZoom:!0,children:n.jsx(Qe,{...e,ref:l,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ne(e.onCloseAutoFocus,c=>{c.preventDefault(),s.current||t.triggerRef.current?.focus()}),onPointerDownOutside:ne(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,h=u.button===0&&u.ctrlKey===!0,d=u.button===2||h;s.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ne(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),gr=a.forwardRef((e,r)=>{const t=$(G,e.__scopePopover),i=a.useRef(!1),l=a.useRef(!1);return n.jsx(Qe,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(i.current||t.triggerRef.current?.focus(),s.preventDefault()),i.current=!1,l.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const c=s.target;t.triggerRef.current?.contains(c)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&l.current&&s.preventDefault()}})}),Qe=a.forwardRef((e,r)=>{const{__scopePopover:t,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:s,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:d,onInteractOutside:v,...f}=e,w=$(G,t),b=se(t);return vt(),n.jsx(ht,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:l,onUnmountAutoFocus:s,children:n.jsx(gt,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:v,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:d,onDismiss:()=>w.onOpenChange(!1),children:n.jsx(wt,{"data-state":Ue(w.open),role:"dialog",id:w.contentId,...b,...f,ref:r,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Xe="PopoverClose",xr=a.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,l=$(Xe,t);return n.jsx(O.button,{type:"button",...i,ref:r,onClick:ne(e.onClick,()=>l.onOpenChange(!1))})});xr.displayName=Xe;var br="PopoverArrow",wr=a.forwardRef((e,r)=>{const{__scopePopover:t,...i}=e,l=se(t);return n.jsx(yt,{...l,...i,ref:r})});wr.displayName=br;function Ue(e){return e?"open":"closed"}var yr=Be,Cr=Ye,jr=Ze,Pr=Je;function kr({...e}){return n.jsx(yr,{"data-slot":"popover",...e})}function Nr({align:e="center",className:r,sideOffset:t=4,...i}){return n.jsx(jr,{children:n.jsx(Pr,{align:e,className:M("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",r),"data-slot":"popover-content",sideOffset:t,...i})})}function Rr({...e}){return n.jsx(Cr,{"data-slot":"popover-trigger",...e})}const Er=e=>{const[r,t]=te(e,f=>f.tags.includes("recommended")&&f.tags.includes("coding")),[i,l]=te(r,f=>f.tags.includes("default")),[s,c]=te(t,f=>f.features.includes("tools")),[u,h]=te(s,f=>f.tags.includes("new")),[d,v]=te(h,f=>f.tags.includes("legacy"));return{Recommended:[...i,...l],New:u,Other:v,"May not support tools":c,Legacy:d}};function Ar({className:e="",disabled:r=!1,errors:t,isError:i=!1,isLoading:l=!1,models:s,onValueChange:c,placeholder:u="Select a model",value:h}){const[d,v]=a.useState(!1),f=s?.find(C=>C.uri===h),w=a.useMemo(()=>s?Er(s):{},[s]),b=r||l||i,E=()=>l?"Loading models...":i?"Failed to load models":!s||s.length===0?"No models available":u,T=()=>f?n.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[n.jsxs(Ct,{children:[n.jsx(jt,{asChild:!0,children:n.jsx("div",{className:"shrink-0",children:n.jsx(Re,{className:"size-3 opacity-90",type:f.params.provider})})}),n.jsx(Pt,{children:n.jsx("p",{children:Ee(f.params.provider).name})})]}),n.jsx("span",{className:"truncate text-xs min-w-0 flex-1",children:f.canonicalId})]}):E(),A=C=>{const k=[];return C.tags.includes("legacy")&&k.push(n.jsx(fe,{className:"text-xs px-1 py-0",variant:"outline",children:"legacy"},"legacy")),C.tags.includes("new")&&k.push(n.jsx(fe,{className:"text-xs px-1 py-0",variant:"outline",children:"new"},"new")),C.features.includes("tools")||k.push(n.jsxs(fe,{className:"text-xs px-1 py-0",variant:"destructive",children:[n.jsx(Dt,{className:"mr-0.5 size-3"}),"tools"]},"no-tools")),k};return!t&&s&&s.length===0?n.jsx(ue,{disabled:r,onClick:()=>{ke.preferences.openSettingsWindow({showNewProviderDialog:!0,tab:"Providers"})},size:"sm",variant:"outline",children:"Add an AI provider"}):n.jsxs(kr,{onOpenChange:v,open:d,children:[n.jsx(Rr,{asChild:!0,children:n.jsxs(ue,{"aria-expanded":d,className:M("flex items-center justify-between text-left h-auto py-1 px-1.5!",!f&&"text-muted-foreground","max-w-full",e),disabled:b,role:"combobox",size:"sm",variant:"ghost",children:[n.jsx("div",{className:"flex items-center w-full min-w-0",children:T()}),n.jsx(kt,{className:"size-4 shrink-0 opacity-70"})]})}),n.jsx(Nr,{align:"start",className:"w-80 p-0",children:n.jsxs(lr,{children:[n.jsx(cr,{className:"h-9",placeholder:"Search models..."}),n.jsxs(ur,{className:"max-h-82",children:[n.jsx(ir,{children:n.jsxs("div",{className:"flex flex-col items-center gap-3 py-6",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"No models found"}),n.jsxs(ue,{onClick:()=>{ke.preferences.openSettingsWindow({showNewProviderDialog:!0,tab:"Providers"})},size:"sm",variant:"outline",children:[n.jsx(Nt,{className:"mr-2 size-4"}),"Add AI provider"]}),n.jsx("p",{className:"text-xs text-muted-foreground text-center max-w-64",children:"The model you're looking for might be available from a different provider"})]})}),t&&t.length>0&&n.jsx(ie,{heading:"Errors",children:t.map((C,k)=>n.jsxs(ce,{className:"flex items-center py-2 cursor-default data-[disabled]:opacity-80!",disabled:!0,children:[n.jsx(at,{className:"mr-2 size-4 shrink-0 text-destructive"}),n.jsx("span",{className:"text-xs line-clamp-2 break-words",children:C})]},k))}),l&&n.jsx(ie,{children:n.jsx(ce,{disabled:!0,children:"Loading models..."})}),i&&n.jsx(ie,{children:n.jsx(ce,{disabled:!0,children:"Failed to load models"})}),s&&s.length>0&&Object.entries(w).map(([C,k])=>k.length>0&&n.jsx(ie,{heading:C,children:k.map(P=>n.jsxs(ce,{className:"flex items-center justify-between py-2",onSelect:()=>{c(P.uri),v(!1)},value:`${P.canonicalId} ${P.params.provider} ${P.tags.join(" ")}`,children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Rt,{className:M("mr-2 size-4",h===P.uri?"opacity-100":"opacity-0")}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm",children:P.canonicalId}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Re,{className:"size-3 flex-shrink-0",type:P.params.provider}),n.jsx("span",{children:Ee(P.params.provider).name})]})]})]}),n.jsx("div",{className:"flex items-center gap-1 ml-2",children:A(P)})]},P.uri))},C))]})]})})]})}function Sr({children:e,className:r,...t}){return n.jsx("div",{className:M("border-input focus-within:border-ring focus-within:ring-ring/50 relative flex min-h-16 w-full rounded-md border bg-transparent shadow-xs transition-[color,box-shadow] focus-within:ring-[3px] flex-col dark:bg-input/30 px-2 py-2",r),"data-slot":"textarea-container",...t,children:e})}function Ir({className:e,...r}){return n.jsx("textarea",{className:M("placeholder:text-muted-foreground aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex-1 field-sizing-content bg-transparent text-sm outline-none resize-none disabled:cursor-not-allowed disabled:opacity-50 border-0",e),"data-slot":"textarea",...r})}const Mr=a.forwardRef(({autoFocus:e=!1,autoResizeMaxHeight:r=400,className:t,disabled:i=!1,isLoading:l=!1,isStoppable:s=!1,isSubmittable:c=!0,modelURI:u,onModelChange:h,onStop:d,onSubmit:v,placeholder:f="Type a message"},w)=>{const[b,E]=a.useState(""),[T,A]=a.useState(!1),C=a.useRef(null),k=a.useRef(null),P=St(Et);a.useImperativeHandle(w,()=>({focus:()=>{k.current?.focus()}}));const{data:Y,isError:D,isLoading:j}=tt(rt.gateway.models.live.list.experimental_liveOptions()),{errors:N,models:V}=Y??{},Z=V?.find(S=>S.uri===u);a.useEffect(()=>{P&&A(!1)},[P]);const q=()=>{C.current&&(C.current.style.height="auto")},J=()=>{if(C.current){q();const S=Math.min(C.current.scrollHeight+2,r);C.current.style.height=`${S}px`}},Q=()=>P?b.trim()?!u||!Z?(Ne.error("Select a model"),!1):c?!0:(Ne.error("Agent is still running. Wait for it to finish or stop it."),!1):!1:(A(!0),!1),X=()=>{!Q()||!u||(v({modelURI:u,prompt:b.trim()}),E(""),q())},_=()=>{d?.()},z=S=>{S.key==="Enter"&&!S.shiftKey&&!S.nativeEvent.isComposing&&(S.preventDefault(),X())},U=S=>{E(S.target.value),J()},ee=!i&&!l&&b.trim()&&u&&Z;return n.jsxs(n.Fragment,{children:[n.jsxs(Sr,{className:M("overflow-auto",t),ref:C,children:[n.jsx(Ir,{autoFocus:e,className:"min-h-12",disabled:i,onChange:U,onKeyDown:z,placeholder:f,ref:k,value:b}),n.jsxs("div",{className:"flex items-center gap-2 justify-end pt-2",children:[h&&n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx(Ar,{disabled:i,errors:N,isError:D,isLoading:j,models:V,onValueChange:h,value:u})}),n.jsx(ue,{className:"h-7 w-7 p-0",disabled:s?!1:!ee,onClick:s?_:X,size:"sm",variant:s?"ghost":"brand",children:s?n.jsxs("div",{className:"relative flex items-center justify-center",children:[n.jsx(At,{className:"size-6 stroke-2 animate-spin"}),n.jsx(Ft,{className:"size-2 fill-current absolute inset-0 m-auto"})]}):l?n.jsx(nt,{className:"size-4 animate-spin"}):n.jsx(Mt,{className:"size-4"})})]})]}),n.jsx(ot,{description:"You need to add an AI provider to submit prompts.",onOpenChange:A,open:T})]})});Mr.displayName="PromptInput";export{lr as C,Mr as P,kr as a,Rr as b,Nr as c,cr as d,ur as e,ir as f,ie as g,ce as h};

import{r as o,t as C,j as e,c as S,a as A,b as y,e as B,o as j}from"./browser-ByRVlxZs.js";import{L as I}from"./label-BtiHOr9H.js";import{c as H}from"./index-Dc_FVRD7.js";import{u as L,c as O,P}from"./index-2emEW3K2.js";import{u as z}from"./index-DD5JTYsS.js";import{u as F}from"./index-CBgJt7o6.js";import{A as q}from"./constants-1ewvo0N-.js";var f="Switch",[Q,re]=O(f),[$,D]=Q(f),N=o.forwardRef((t,a)=>{const{__scopeSwitch:s,name:r,checked:n,defaultChecked:b,required:d,disabled:c,value:l="on",onCheckedChange:g,form:i,...x}=t,[u,p]=o.useState(null),v=C(a,h=>p(h)),k=o.useRef(!1),w=u?i||!!u.closest("form"):!0,[m,U]=L({prop:n,defaultProp:b??!1,onChange:g,caller:f});return e.jsxs($,{scope:s,checked:m,disabled:c,children:[e.jsx(P.button,{type:"button",role:"switch","aria-checked":m,"aria-required":d,"data-state":M(m),"data-disabled":c?"":void 0,disabled:c,value:l,...x,ref:v,onClick:H(t.onClick,h=>{U(T=>!T),w&&(k.current=h.isPropagationStopped(),k.current||h.stopPropagation())})}),w&&e.jsx(R,{control:u,bubbles:!k.current,name:r,value:l,checked:m,required:d,disabled:c,form:i,style:{transform:"translateX(-100%)"}})]})});N.displayName=f;var E="SwitchThumb",_=o.forwardRef((t,a)=>{const{__scopeSwitch:s,...r}=t,n=D(E,s);return e.jsx(P.span,{"data-state":M(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:a})});_.displayName=E;var W="SwitchBubbleInput",R=o.forwardRef(({__scopeSwitch:t,control:a,checked:s,bubbles:r=!0,...n},b)=>{const d=o.useRef(null),c=C(d,b),l=z(s),g=F(a);return o.useEffect(()=>{const i=d.current;if(!i)return;const x=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(x,"checked").set;if(l!==s&&p){const v=new Event("click",{bubbles:r});p.call(i,s),i.dispatchEvent(v)}},[l,s,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:c,style:{...n.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});R.displayName=W;function M(t){return t?"checked":"unchecked"}var X=N,G=_;function J({className:t,...a}){return e.jsx(X,{className:S("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),"data-slot":"switch",...a,children:e.jsx(G,{className:S("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"),"data-slot":"switch-thumb"})})}function ne(){return e.jsx("div",{className:"space-y-4",children:e.jsx(K,{})})}function K(){const{data:t}=A(y.preferences.live.get.experimental_liveOptions()),a=B(y.preferences.setEnableUsageMetrics.mutationOptions()),s=async r=>{try{await a.mutateAsync({enabled:r}),j.success(r?"Usage metrics enabled":"Usage metrics disabled",{position:"bottom-center"})}catch{j.error("Failed to update usage metrics preference",{position:"bottom-center"})}};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-base font-semibold",children:"Usage"})}),e.jsx("div",{className:"rounded-lg border bg-accent/30 p-4 shadow-sm",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{checked:t?.enableUsageMetrics||!1,disabled:a.isPending,id:"usage-metrics",onCheckedChange:s}),e.jsxs(I,{className:"inline",htmlFor:"usage-metrics",children:["Help Quests improve by submitting anonymous"," ",e.jsx("a",{className:"text-blue-600 dark:text-blue-400 hover:underline",href:`${q}/blob/main/docs/usage-metrics.md`,rel:"noopener noreferrer",target:"_blank",children:"usage metrics"})]})]})})})]})}export{ne as component};
